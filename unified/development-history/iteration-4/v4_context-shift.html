<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context Shift - A Language Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #667eea;
        }

        .subtitle {
            text-align: center;
            font-style: italic;
            margin-bottom: 30px;
            color: #666;
        }

        .intro-screen, .game-screen, .victory-screen {
            display: none;
        }

        .intro-screen.active, .game-screen.active, .victory-screen.active {
            display: block;
        }

        .quote {
            background: #f0f0f0;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            font-style: italic;
        }

        .phrase-display {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
            font-size: 2em;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .action-card {
            background: #f8f9fa;
            border: 3px solid #ddd;
            border-radius: 12px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            position: relative;
        }

        .action-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .action-card .icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .action-card .title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .action-card .description {
            font-size: 0.9em;
            color: #666;
        }

        .action-card.correct {
            border-color: #00b894;
            background: linear-gradient(135deg, #d4f1de, #e8f8f0);
            animation: success-pulse 0.6s;
        }

        .action-card.incorrect {
            border-color: #ff6b6b;
            background: linear-gradient(135deg, #ffe0e0, #fff0f0);
            animation: shake 0.5s;
        }

        @keyframes success-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-5px); }
        }

        .feedback {
            margin-top: 30px;
            padding: 25px;
            border-radius: 12px;
            display: none;
            line-height: 1.6;
        }

        .feedback.show {
            display: block;
        }

        .feedback.success {
            background: linear-gradient(135deg, #d4f1de, #e8f8f0);
            border: 2px solid #00b894;
        }

        .feedback.error {
            background: linear-gradient(135deg, #ffe0e0, #fff0f0);
            border: 2px solid #ff6b6b;
        }

        .score-panel {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .score-item {
            text-align: center;
        }

        .score-item .label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .score-item .value {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
        }

        button {
            padding: 15px 40px;
            font-size: 1.1em;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin: 10px;
        }

        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .button-container {
            text-align: center;
            margin-top: 20px;
        }

        .hint {
            background: #fff9e6;
            border-left: 4px solid #ffd93d;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .context-reveal {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid #2196f3;
        }

        .context-reveal h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s;
        }

        .contexts-unlocked {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .context-badge {
            padding: 8px 16px;
            background: #e0e0e0;
            border-radius: 20px;
            font-size: 0.9em;
            color: #666;
        }

        .context-badge.unlocked {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Intro Screen -->
        <div class="intro-screen active">
            <h1>Context Shift</h1>
            <p class="subtitle">Discover How Context Determines Meaning</p>

            <div class="quote">
                "The same phrase can mean entirely different things depending on which language game you're playing."
                <br><br>
                <strong>â€” Wittgensteinian Insight</strong>
            </div>

            <div style="margin: 30px 0; line-height: 1.8;">
                <p>You'll be given ambiguous phrasesâ€”expressions that could mean many different things.</p>
                <br>
                <p>Your challenge: <strong>Figure out which "language game" you're in by choosing the correct action.</strong></p>
                <br>
                <p>Each phrase exists in multiple contextsâ€”a soccer game, a card game, an exam, a narrow hallway. The same words, but completely different meanings!</p>
            </div>

            <div class="hint">
                <strong>Wittgenstein's Point:</strong> Language isn't about words having "true meanings." Instead, meaning emerges from the context and the practices in which language is used. Context disambiguates!
            </div>

            <div class="button-container">
                <button onclick="startGame()">Start Playing</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div class="game-screen">
            <h1>Context Shift</h1>

            <div class="score-panel">
                <div class="score-item">
                    <div class="label">Score</div>
                    <div class="value" id="score">0</div>
                </div>
                <div class="score-item">
                    <div class="label">Level</div>
                    <div class="value" id="level">1</div>
                </div>
                <div class="score-item">
                    <div class="label">Contexts Unlocked</div>
                    <div class="value" id="contextsCount">0</div>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="contexts-unlocked" id="contextBadges"></div>

            <div class="phrase-display" id="phraseDisplay">
                "Can you pass?"
            </div>

            <div class="actions-grid" id="actionsGrid"></div>

            <div class="feedback" id="feedback"></div>

            <div class="button-container">
                <button onclick="nextPhrase()" id="nextButton" style="display: none;">Next Phrase â†’</button>
            </div>
        </div>

        <!-- Victory Screen -->
        <div class="victory-screen">
            <h1>ðŸŽ“ Context Master!</h1>

            <div class="quote">
                "Now you see: meaning doesn't live inside words. It lives in how we use them."
            </div>

            <div class="score-panel">
                <div class="score-item">
                    <div class="label">Final Score</div>
                    <div class="value" id="finalScore">0</div>
                </div>
                <div class="score-item">
                    <div class="label">Contexts Mastered</div>
                    <div class="value" id="finalContexts">0</div>
                </div>
            </div>

            <div class="context-reveal">
                <h3>What You've Learned:</h3>
                <p><strong>Contextual Disambiguation:</strong> The same phrase functions completely differently in different social practices (language games).</p>
                <br>
                <p><strong>No Fixed Meanings:</strong> Words don't carry meaning independentlyâ€”context and use determine what they mean.</p>
                <br>
                <p><strong>Forms of Life:</strong> Each context (sports, games, academics, daily life) represents a different "form of life" with its own rules and conventions.</p>
            </div>

            <div class="button-container">
                <button onclick="location.reload()">Play Again</button>
            </div>
        </div>
    </div>

    <script>
        const gameState = {
            score: 0,
            level: 1,
            currentPhraseIndex: 0,
            contextsUnlocked: new Set(),
            totalPhrases: 0
        };

        const phrases = [
            {
                phrase: "Can you pass?",
                contexts: [
                    {
                        icon: "âš½",
                        title: "Soccer Game",
                        description: "Pass the ball to a teammate",
                        correct: true,
                        explanation: "In soccer, 'pass' means to kick the ball to another player. This is the language game of sports, where 'pass' has a specific physical action associated with it."
                    },
                    {
                        icon: "ðŸŽ´",
                        title: "Card Game",
                        description: "Skip your turn",
                        correct: false,
                        explanation: "While 'pass' can mean skipping a turn in card games, this wasn't the context here. Different game, different rules!"
                    },
                    {
                        icon: "ðŸšª",
                        title: "Narrow Hallway",
                        description: "Physically fit through",
                        correct: false,
                        explanation: "In a physical space context, 'pass' could mean 'fit through,' but that's not what's happening here."
                    },
                    {
                        icon: "ðŸ“",
                        title: "Exam",
                        description: "Succeed academically",
                        correct: false,
                        explanation: "In academic contexts, 'pass' means achieving a passing grade. But this phrase was in a different language game!"
                    }
                ]
            },
            {
                phrase: "That's a strike!",
                contexts: [
                    {
                        icon: "âš¾",
                        title: "Baseball Game",
                        description: "Missed the ball",
                        correct: true,
                        explanation: "In baseball, a 'strike' is when the batter swings and misses or doesn't swing at a good pitch. The sporting context determines this meaning."
                    },
                    {
                        icon: "ðŸŽ³",
                        title: "Bowling Alley",
                        description: "Knocked down all pins",
                        correct: false,
                        explanation: "In bowling, 'strike' means knocking down all pinsâ€”a success! But that wasn't the context we were in."
                    },
                    {
                        icon: "ðŸª§",
                        title: "Labor Protest",
                        description: "Workers refusing to work",
                        correct: false,
                        explanation: "In labor contexts, a 'strike' is a work stoppage. Same word, but we're in a different language game here."
                    },
                    {
                        icon: "âš¡",
                        title: "Lightning Storm",
                        description: "Electrical discharge hit",
                        correct: false,
                        explanation: "Lightning can 'strike,' but this wasn't about weatherâ€”it was about a different kind of action entirely!"
                    }
                ]
            },
            {
                phrase: "Draw!",
                contexts: [
                    {
                        icon: "ðŸŽ¨",
                        title: "Art Class",
                        description: "Create a picture",
                        correct: true,
                        explanation: "In artistic contexts, 'draw' means to create an image with pencils or other tools. The setting (art class) makes this meaning clear."
                    },
                    {
                        icon: "ðŸŽ´",
                        title: "Card Game",
                        description: "Take a card from the deck",
                        correct: false,
                        explanation: "In card games, 'draw' means taking a card. But this command was given in a different context!"
                    },
                    {
                        icon: "ðŸ¤ ",
                        title: "Western Duel",
                        description: "Pull out your weapon",
                        correct: false,
                        explanation: "In old Western duels, 'draw' meant pulling out your gun. Dramatic, but not the language game we're playing!"
                    },
                    {
                        icon: "ðŸ†",
                        title: "Sports Match",
                        description: "Tie score outcome",
                        correct: false,
                        explanation: "In competitive sports, a 'draw' is a tie. But we weren't talking about game outcomes here."
                    }
                ]
            },
            {
                phrase: "Break!",
                contexts: [
                    {
                        icon: "ðŸŽ±",
                        title: "Pool Game",
                        description: "First shot scattering balls",
                        correct: true,
                        explanation: "In pool/billiards, 'break' means the opening shot that scatters the balls. The context of the game determines this specific meaning."
                    },
                    {
                        icon: "â˜•",
                        title: "Work Day",
                        description: "Time to rest",
                        correct: false,
                        explanation: "At work, 'break' means rest time. But this command was in the context of a game, not work!"
                    },
                    {
                        icon: "ðŸŽ¬",
                        title: "Film Set",
                        description: "Stop filming",
                        correct: false,
                        explanation: "On a film set, 'break' might mean stopping production. But we're playing a different game here."
                    },
                    {
                        icon: "ðŸ”¨",
                        title: "Construction Site",
                        description: "Smash or demolish",
                        correct: false,
                        explanation: "In construction, 'break' could mean demolish. But the context here was recreational, not destructive!"
                    }
                ]
            },
            {
                phrase: "You're out!",
                contexts: [
                    {
                        icon: "âš¾",
                        title: "Baseball Game",
                        description: "Eliminated from play",
                        correct: true,
                        explanation: "In baseball, 'you're out' means you've been eliminated from your current at-bat. The sports context makes this meaning primary."
                    },
                    {
                        icon: "ðŸšª",
                        title: "Argument",
                        description: "Leave immediately",
                        correct: false,
                        explanation: "In an argument, 'you're out' could mean 'get out!' But that's a different, more confrontational language game."
                    },
                    {
                        icon: "ðŸ’¡",
                        title: "Guessing Game",
                        description: "Incorrect guess",
                        correct: false,
                        explanation: "In guessing contexts, being 'out' might mean wrong. But we're in a different kind of game!"
                    },
                    {
                        icon: "ðŸŽ­",
                        title: "Social Scene",
                        description: "No longer fashionable",
                        correct: false,
                        explanation: "In fashion/social contexts, 'out' can mean unfashionable. But this phrase was about gameplay, not style!"
                    }
                ]
            },
            {
                phrase: "Check!",
                contexts: [
                    {
                        icon: "â™Ÿï¸",
                        title: "Chess Game",
                        description: "King is under threat",
                        correct: true,
                        explanation: "In chess, 'check' announces that the opponent's king is threatened. The game's rules make this meaning specific and clear."
                    },
                    {
                        icon: "âœ…",
                        title: "To-Do List",
                        description: "Mark as complete",
                        correct: false,
                        explanation: "For tasks, 'check' means marking complete. But this exclamation was in a competitive game context!"
                    },
                    {
                        icon: "ðŸ½ï¸",
                        title: "Restaurant",
                        description: "Request the bill",
                        correct: false,
                        explanation: "At restaurants, 'check' means the bill. But we're not diningâ€”we're playing a strategic game!"
                    },
                    {
                        icon: "ðŸ”",
                        title: "Inspection",
                        description: "Examine carefully",
                        correct: false,
                        explanation: "To 'check' can mean to verify or inspect. But in this context, it's a game announcement, not an investigation!"
                    }
                ]
            },
            {
                phrase: "Hold!",
                contexts: [
                    {
                        icon: "ðŸ“ž",
                        title: "Phone Call",
                        description: "Wait on the line",
                        correct: true,
                        explanation: "On a phone call, 'hold' means wait while staying connected. The telecommunication context determines this meaning."
                    },
                    {
                        icon: "ðŸ°",
                        title: "Medieval Battle",
                        description: "Defend this position",
                        correct: false,
                        explanation: "In battle, 'hold' means defend. But this command wasn't militaryâ€”it was about communication!"
                    },
                    {
                        icon: "ðŸ‘¶",
                        title: "With a Baby",
                        description: "Physically carry",
                        correct: false,
                        explanation: "You can 'hold' a baby physically. But this wasn't about physical graspingâ€”it was a different instruction!"
                    },
                    {
                        icon: "ðŸŽª",
                        title: "Performance",
                        description: "Pause the show",
                        correct: false,
                        explanation: "In performances, 'hold' might mean pause. But we're in a communication context, not entertainment!"
                    }
                ]
            },
            {
                phrase: "Run!",
                contexts: [
                    {
                        icon: "ðŸƒ",
                        title: "Track Meet",
                        description: "Sprint at full speed",
                        correct: true,
                        explanation: "In athletics, 'run' means to move quickly on foot. The sporting context makes this the primary meaning."
                    },
                    {
                        icon: "ðŸ’»",
                        title: "Programming",
                        description: "Execute the code",
                        correct: false,
                        explanation: "In programming, 'run' means execute code. But this wasn't a technical contextâ€”it was physical!"
                    },
                    {
                        icon: "ðŸŽ¬",
                        title: "Theater Rehearsal",
                        description: "Practice the scene",
                        correct: false,
                        explanation: "In theater, to 'run' something means to rehearse it. But we're in a sports context, not performing arts!"
                    },
                    {
                        icon: "ðŸ—³ï¸",
                        title: "Political Campaign",
                        description: "Compete for office",
                        correct: false,
                        explanation: "Politicians 'run' for office. But this command was about physical action, not political candidacy!"
                    }
                ]
            }
        ];

        gameState.totalPhrases = phrases.length;

        function startGame() {
            document.querySelector('.intro-screen').classList.remove('active');
            document.querySelector('.game-screen').classList.add('active');
            loadPhrase();
        }

        function loadPhrase() {
            if (gameState.currentPhraseIndex >= phrases.length) {
                showVictory();
                return;
            }

            const phrase = phrases[gameState.currentPhraseIndex];
            document.getElementById('phraseDisplay').textContent = `"${phrase.phrase}"`;

            const actionsGrid = document.getElementById('actionsGrid');
            actionsGrid.innerHTML = '';

            // Shuffle contexts
            const shuffled = [...phrase.contexts].sort(() => Math.random() - 0.5);

            shuffled.forEach(context => {
                const card = document.createElement('div');
                card.className = 'action-card';
                card.innerHTML = `
                    <div class="icon">${context.icon}</div>
                    <div class="title">${context.title}</div>
                    <div class="description">${context.description}</div>
                `;
                card.onclick = () => selectAction(context, phrase);
                actionsGrid.appendChild(card);
            });

            document.getElementById('feedback').classList.remove('show');
            document.getElementById('nextButton').style.display = 'none';

            updateProgress();
            updateBadges();
        }

        function selectAction(selected, phrase) {
            const cards = document.querySelectorAll('.action-card');
            cards.forEach(card => card.onclick = null);

            const feedback = document.getElementById('feedback');

            if (selected.correct) {
                cards.forEach(card => {
                    if (card.querySelector('.title').textContent === selected.title) {
                        card.classList.add('correct');
                    }
                });

                feedback.className = 'feedback success show';
                feedback.innerHTML = `
                    <strong>ðŸŽ¯ Correct!</strong> You identified the right context!
                    <br><br>
                    <strong>Why:</strong> ${selected.explanation}
                `;

                gameState.score += 100;
                gameState.contextsUnlocked.add(selected.title);

            } else {
                cards.forEach(card => {
                    const title = card.querySelector('.title').textContent;
                    if (title === selected.title) {
                        card.classList.add('incorrect');
                    }
                    phrase.contexts.forEach(ctx => {
                        if (ctx.correct && ctx.title === title) {
                            card.classList.add('correct');
                        }
                    });
                });

                const correctContext = phrase.contexts.find(c => c.correct);
                feedback.className = 'feedback error show';
                feedback.innerHTML = `
                    <strong>Not quite!</strong> The correct context was <strong>${correctContext.title}</strong>.
                    <br><br>
                    <strong>Your choice:</strong> ${selected.explanation}
                    <br><br>
                    <strong>Correct answer:</strong> ${correctContext.explanation}
                `;

                gameState.score += 25;
            }

            updateScore();
            document.getElementById('nextButton').style.display = 'inline-block';
        }

        function nextPhrase() {
            gameState.currentPhraseIndex++;
            if (gameState.currentPhraseIndex % 3 === 0) {
                gameState.level++;
            }
            loadPhrase();
        }

        function updateScore() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('contextsCount').textContent = gameState.contextsUnlocked.size;
        }

        function updateProgress() {
            const progress = (gameState.currentPhraseIndex / gameState.totalPhrases) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function updateBadges() {
            const container = document.getElementById('contextBadges');
            const allContexts = ['Soccer Game', 'Card Game', 'Narrow Hallway', 'Exam', 'Baseball Game',
                                'Bowling Alley', 'Labor Protest', 'Art Class', 'Western Duel', 'Pool Game',
                                'Work Day', 'Chess Game', 'Restaurant', 'Phone Call', 'Track Meet', 'Programming'];

            container.innerHTML = '';
            const displayContexts = [...gameState.contextsUnlocked].slice(-5);

            displayContexts.forEach(context => {
                const badge = document.createElement('div');
                badge.className = 'context-badge unlocked';
                badge.textContent = context;
                container.appendChild(badge);
            });
        }

        function showVictory() {
            document.querySelector('.game-screen').classList.remove('active');
            document.querySelector('.victory-screen').classList.add('active');

            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('finalContexts').textContent = gameState.contextsUnlocked.size;
        }
    </script>
</body>
</html>
